def targetFile = "src/main/assets/smartreply.tflite"
def modelDownloadUrl = "https://storage.googleapis.com/download.tensorflow.org/models/tflite/smartreply/smartreply.tflite"

class DownloadUrlTask extends DefaultTask {
    @Input
    String sourceUrl

    @OutputFile
    File target

    @TaskAction
    void download() {
        ant.get(src: sourceUrl, dest: target)
    }
}

// Required to download TF Lite model for Smart Reply.
task downloadLiteModel(type: DownloadUrlTask) {
    doFirst {
        println "Downloading TFLite Modle ${modelDownloadUrl}"
    }

    sourceUrl = modelDownloadUrl
    target = file(targetFile)
}

preBuild.dependsOn downloadLiteModel
